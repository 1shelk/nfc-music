<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            background: black;
        }
        
        #videoTrigger {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.0001;
        }
    </style>
</head>
<body>
    <!-- Невидимое видео с muted -->
    <video id="videoTrigger" autoplay muted playsinline>
        <source src="'https://1shelk.github.io/nfc-music/placeholder.mp4" type="video/mp4">
    </video>

    <!-- Основной аудио-плеер -->
    <audio id="audioPlayer" loop>
        <source src="'https://1shelk.github.io/nfc-music/zalupa.mp3" type="audio/mpeg">
    </audio>

    <script>
        const audio = document.getElementById('audioPlayer');
        const video = document.getElementById('videoTrigger');

        // Стратегия 1: Попытка запуска через событие loadedmetadata
        video.addEventListener('loadedmetadata', () => {
            audio.play().catch(e => console.log('Autoplay attempt 1 failed'));
        });

        // Стратегия 2: Запуск через таймаут с имитацией взаимодействия
        setTimeout(() => {
            video.play().then(() => {
                audio.play().catch(e => console.log('Autoplay attempt 2 failed'));
            });
        }, 1000);

        // Стратегия 3: Активация при любом взаимодействии
        document.addEventListener('click', () => {
            audio.play().catch(e => console.log('Manual play failed'));
            video.style.opacity = '0';
        });

        // Дополнительные условия для улучшения совместимости
        window.onload = function() {
            if (typeof video.play === 'function') {
                video.play();
            }
        };
    </script>
</body>
</html>
